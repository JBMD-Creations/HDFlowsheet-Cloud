<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Drag & Drop Comparison</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- React 17 (better CDN compatibility with react-beautiful-dnd) -->
    <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>

    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- react-beautiful-dnd (original Atlassian version with good UMD support) -->
    <script src="https://unpkg.com/react-beautiful-dnd@13.1.1/dist/react-beautiful-dnd.min.js"></script>

    <style>
        :root {
            --primary: #3b82f6;
            --primary-hover: #2563eb;
            --primary-foreground: #ffffff;
            --background: #ffffff;
            --foreground: #111827;
            --muted: #f9fafb;
            --muted-foreground: #6b7280;
            --border: #e5e7eb;
            --success: #22c55e;
            --success-light: #f0fdf4;
            --success-foreground: #166534;
            --warning: #f59e0b;
            --warning-light: #fffbeb;
            --warning-foreground: #92400e;
            --radius-md: 0.375rem;
            --radius-lg: 0.5rem;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 14px;
            line-height: 1.5;
            color: var(--foreground);
            background: var(--muted);
            padding: 2rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .page-header {
            margin-bottom: 2rem;
        }

        .page-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--foreground);
            margin-bottom: 0.5rem;
        }

        .page-subtitle {
            color: var(--muted-foreground);
            font-size: 0.875rem;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        @media (max-width: 800px) {
            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            overflow: hidden;
        }

        .panel-header {
            padding: 1rem 1.25rem;
            background: var(--muted);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .panel-title {
            font-weight: 600;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .panel-badge {
            padding: 0.25rem 0.5rem;
            font-size: 0.7rem;
            font-weight: 500;
            border-radius: 9999px;
        }

        .badge-react {
            background: #61dafb20;
            color: #0ea5e9;
        }

        .badge-vanilla {
            background: #f59e0b20;
            color: #d97706;
        }

        .panel-body {
            padding: 1rem;
        }

        /* Section Card Styles */
        .section-card {
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            margin-bottom: 0.5rem;
            overflow: hidden;
            transition: box-shadow 0.2s, border-color 0.2s;
        }

        .section-card:last-child {
            margin-bottom: 0;
        }

        .section-card:hover {
            border-color: var(--primary);
        }

        .section-header {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            background: #eff6ff;
            border-bottom: 1px solid #bfdbfe;
            cursor: grab;
            user-select: none;
        }

        .section-header:active {
            cursor: grabbing;
        }

        .drag-handle {
            color: #9ca3af;
            margin-right: 0.75rem;
            font-size: 1rem;
            display: flex;
            align-items: center;
        }

        .section-icon {
            margin-right: 0.5rem;
            font-size: 1rem;
        }

        .section-title {
            flex: 1;
            font-weight: 600;
            font-size: 0.875rem;
            color: #1e40af;
        }

        .section-badge {
            padding: 0.25rem 0.5rem;
            font-size: 0.7rem;
            font-weight: 600;
            border-radius: 9999px;
            background: var(--success-light);
            color: var(--success-foreground);
        }

        .section-badge.pending {
            background: var(--warning-light);
            color: var(--warning-foreground);
        }

        .section-chevron {
            color: var(--primary);
            margin-left: 0.75rem;
        }

        /* Dragging styles */
        .section-card.dragging {
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
            opacity: 1 !important;
        }

        /* Info boxes */
        .info-box {
            margin-top: 1rem;
            padding: 0.75rem 1rem;
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: var(--radius-md);
            font-size: 0.8rem;
            color: #0369a1;
        }

        .info-box strong {
            font-weight: 600;
        }

        /* Reset button */
        .btn-reset {
            padding: 0.5rem 1rem;
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--muted-foreground);
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.15s;
        }

        .btn-reset:hover {
            background: var(--muted);
            color: var(--foreground);
        }

        /* SortableJS specific */
        .sortable-ghost {
            opacity: 0.4;
            background: #dbeafe;
        }

        .sortable-chosen {
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .sortable-drag {
            opacity: 1 !important;
            box-shadow: var(--shadow-lg);
        }

        /* Order display */
        .order-display {
            margin-top: 1rem;
            padding: 0.75rem;
            background: var(--muted);
            border-radius: var(--radius-md);
            font-size: 0.75rem;
            font-family: monospace;
            color: var(--muted-foreground);
        }

        .order-display strong {
            color: var(--foreground);
        }

        /* Dragging over container */
        .drag-over-container {
            background: #f0f9ff;
            border-radius: var(--radius-md);
            transition: background 0.2s;
            padding: 0.25rem;
            margin: -0.25rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="page-header">
            <h1 class="page-title">Drag & Drop Comparison</h1>
            <p class="page-subtitle">Compare React react-beautiful-dnd vs Vanilla SortableJS - drag sections to reorder</p>
        </div>

        <div class="comparison-grid">
            <!-- React Panel -->
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title">
                        <span>React + react-beautiful-dnd</span>
                        <span class="panel-badge badge-react">React 17</span>
                    </div>
                </div>
                <div class="panel-body">
                    <div id="react-root"></div>
                </div>
            </div>

            <!-- Vanilla Panel -->
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title">
                        <span>Vanilla + SortableJS</span>
                        <span class="panel-badge badge-vanilla">No Framework</span>
                    </div>
                    <button class="btn-reset" onclick="resetVanillaOrder()">Reset Order</button>
                </div>
                <div class="panel-body">
                    <div id="vanilla-sortable">
                        <div class="section-card" data-id="dialysis">
                            <div class="section-header">
                                <span class="drag-handle">‚ãÆ‚ãÆ</span>
                                <span class="section-icon">üìû</span>
                                <span class="section-title">Dialysis Requested</span>
                                <span class="section-badge">5/6</span>
                                <span class="section-chevron">‚ñ∂</span>
                            </div>
                        </div>
                        <div class="section-card" data-id="visit">
                            <div class="section-header">
                                <span class="drag-handle">‚ãÆ‚ãÆ</span>
                                <span class="section-icon">üë§</span>
                                <span class="section-title">Visit Patient</span>
                                <span class="section-badge">8/8</span>
                                <span class="section-chevron">‚ñ∂</span>
                            </div>
                        </div>
                        <div class="section-card" data-id="setup">
                            <div class="section-header">
                                <span class="drag-handle">‚ãÆ‚ãÆ</span>
                                <span class="section-icon">üîß</span>
                                <span class="section-title">Setup Machine & RO</span>
                                <span class="section-badge">Complete</span>
                                <span class="section-chevron">‚ñ∂</span>
                            </div>
                        </div>
                        <div class="section-card" data-id="supplies">
                            <div class="section-header">
                                <span class="drag-handle">‚ãÆ‚ãÆ</span>
                                <span class="section-icon">üì¶</span>
                                <span class="section-title">Gather Supplies</span>
                                <span class="section-badge pending">9/12</span>
                                <span class="section-chevron">‚ñ∂</span>
                            </div>
                        </div>
                        <div class="section-card" data-id="cerner">
                            <div class="section-header">
                                <span class="drag-handle">‚ãÆ‚ãÆ</span>
                                <span class="section-icon">üìù</span>
                                <span class="section-title">CERNER Notes</span>
                                <span class="section-badge pending">2/4</span>
                                <span class="section-chevron">‚ñ∂</span>
                            </div>
                        </div>
                        <div class="section-card" data-id="assessment">
                            <div class="section-header">
                                <span class="drag-handle">‚ãÆ‚ãÆ</span>
                                <span class="section-icon">ü©∫</span>
                                <span class="section-title">Pre/Post Assessment</span>
                                <span class="section-badge pending">In Progress</span>
                                <span class="section-chevron">‚ñ∂</span>
                            </div>
                        </div>
                        <div class="section-card" data-id="tracking">
                            <div class="section-header">
                                <span class="drag-handle">‚ãÆ‚ãÆ</span>
                                <span class="section-icon">‚è±Ô∏è</span>
                                <span class="section-title">Treatment Tracking</span>
                                <span class="section-badge pending">In Progress</span>
                                <span class="section-chevron">‚ñ∂</span>
                            </div>
                        </div>
                    </div>
                    <div class="order-display" id="vanilla-order">
                        <strong>Order:</strong> dialysis, visit, setup, supplies, cerner, assessment, tracking
                    </div>
                    <div class="info-box">
                        <strong>SortableJS:</strong> ~10kb, smooth CSS transforms, excellent touch support, no framework needed.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SortableJS -->
    <script src="https://unpkg.com/sortablejs@1.15.2/Sortable.min.js"></script>

    <!-- Vanilla SortableJS Implementation -->
    <script>
        // Initialize SortableJS
        const vanillaSortable = new Sortable(document.getElementById('vanilla-sortable'), {
            animation: 150,
            easing: 'cubic-bezier(0.25, 1, 0.5, 1)',
            handle: '.section-header',
            ghostClass: 'sortable-ghost',
            chosenClass: 'sortable-chosen',
            dragClass: 'sortable-drag',
            onEnd: function(evt) {
                updateVanillaOrderDisplay();
            }
        });

        function updateVanillaOrderDisplay() {
            const items = document.querySelectorAll('#vanilla-sortable .section-card');
            const order = Array.from(items).map(el => el.dataset.id);
            document.getElementById('vanilla-order').innerHTML =
                '<strong>Order:</strong> ' + order.join(', ');
        }

        function resetVanillaOrder() {
            const container = document.getElementById('vanilla-sortable');
            const defaultOrder = ['dialysis', 'visit', 'setup', 'supplies', 'cerner', 'assessment', 'tracking'];
            defaultOrder.forEach(id => {
                const el = container.querySelector(`[data-id="${id}"]`);
                if (el) container.appendChild(el);
            });
            updateVanillaOrderDisplay();
        }
    </script>

    <!-- React Implementation -->
    <script type="text/babel">
        const { useState, useCallback } = React;
        const { DragDropContext, Droppable, Draggable } = window.ReactBeautifulDnd;

        const initialSections = [
            { id: 'dialysis', icon: 'üìû', title: 'Dialysis Requested', badge: '5/6', status: 'complete' },
            { id: 'visit', icon: 'üë§', title: 'Visit Patient', badge: '8/8', status: 'complete' },
            { id: 'setup', icon: 'üîß', title: 'Setup Machine & RO', badge: 'Complete', status: 'complete' },
            { id: 'supplies', icon: 'üì¶', title: 'Gather Supplies', badge: '9/12', status: 'pending' },
            { id: 'cerner', icon: 'üìù', title: 'CERNER Notes', badge: '2/4', status: 'pending' },
            { id: 'assessment', icon: 'ü©∫', title: 'Pre/Post Assessment', badge: 'In Progress', status: 'pending' },
            { id: 'tracking', icon: '‚è±Ô∏è', title: 'Treatment Tracking', badge: 'In Progress', status: 'pending' },
        ];

        function SectionCard({ section, index }) {
            return (
                <Draggable draggableId={section.id} index={index}>
                    {(provided, snapshot) => (
                        <div
                            ref={provided.innerRef}
                            {...provided.draggableProps}
                            {...provided.dragHandleProps}
                            className={`section-card ${snapshot.isDragging ? 'dragging' : ''}`}
                            style={{
                                ...provided.draggableProps.style,
                                boxShadow: snapshot.isDragging ? 'var(--shadow-lg)' : undefined,
                            }}
                        >
                            <div className="section-header">
                                <span className="drag-handle">‚ãÆ‚ãÆ</span>
                                <span className="section-icon">{section.icon}</span>
                                <span className="section-title">{section.title}</span>
                                <span className={`section-badge ${section.status === 'pending' ? 'pending' : ''}`}>
                                    {section.badge}
                                </span>
                                <span className="section-chevron">‚ñ∂</span>
                            </div>
                        </div>
                    )}
                </Draggable>
            );
        }

        function App() {
            const [sections, setSections] = useState(initialSections);

            const onDragEnd = useCallback((result) => {
                if (!result.destination) return;

                const items = Array.from(sections);
                const [reorderedItem] = items.splice(result.source.index, 1);
                items.splice(result.destination.index, 0, reorderedItem);

                setSections(items);
            }, [sections]);

            const resetOrder = () => {
                setSections(initialSections);
            };

            return (
                <div>
                    <div style={{ display: 'flex', justifyContent: 'flex-end', marginBottom: '0.5rem' }}>
                        <button className="btn-reset" onClick={resetOrder}>Reset Order</button>
                    </div>
                    <DragDropContext onDragEnd={onDragEnd}>
                        <Droppable droppableId="sections">
                            {(provided, snapshot) => (
                                <div
                                    ref={provided.innerRef}
                                    {...provided.droppableProps}
                                    className={snapshot.isDraggingOver ? 'drag-over-container' : ''}
                                >
                                    {sections.map((section, index) => (
                                        <SectionCard key={section.id} section={section} index={index} />
                                    ))}
                                    {provided.placeholder}
                                </div>
                            )}
                        </Droppable>
                    </DragDropContext>
                    <div className="order-display">
                        <strong>Order:</strong> {sections.map(s => s.id).join(', ')}
                    </div>
                    <div className="info-box">
                        <strong>React + react-beautiful-dnd:</strong> Declarative, smooth animations, great accessibility (keyboard support), by Atlassian.
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('react-root'));
    </script>
</body>
</html>
